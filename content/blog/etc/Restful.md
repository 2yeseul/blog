---
title: 'RESTFul API ì„¤ê³„ ê°€ì´ë“œ ì •ë¦¬'
date: 2021-09-10 00:00:00
description: ""
tags: [ETC]
thumbnail: 
---  

# ðŸ“Œ ì„¤ê³„ ì¤‘ì‹¬ ê·œì¹™

> **URI**ëŠ” **ì •ë³´ì˜ ìžì›**ì„ í‘œí˜„í•´ì•¼ í•œë‹¤
ìžì›ì— ëŒ€í•œ **í–‰ìœ„**ëŠ” **HTTP Method**(GET, POST, PUT, DELETE ë“±)ìœ¼ë¡œ í‘œí˜„í•œë‹¤

## URI ìž‘ì„± ê·œì¹™

ðŸ‘Ž

```bash
GET /users/show/1
```

ðŸ‘

```bash
GET /users/1
```

**URI**ëŠ” **ìžì›**ì„ í‘œí˜„í•´ì•¼ í•˜ë¯€ë¡œ, showì™€ ê°™ì€ **í–‰ìœ„ê°€ í¬í•¨ë˜ë©´ ì•ˆëœë‹¤**. showëŠ” HTTP Methodì¸ GETì„ í†µí•´ ì¶©ë¶„ížˆ í‘œí˜„ ê°€ëŠ¥í•˜ë‹¤.

ìžì›ì€ `Collection`ê³¼ `Element`ë¡œ ë‚˜ëˆ„ì–´ í‘œí˜„í•  ìˆ˜ ìžˆê³ , ì•„ëž˜ í…Œì´ë¸”ì— ê¸°ì´ˆí•˜ì—¬ ì„œë²„ ëŒ€ë¶€ë¶„ê³¼ì˜ í†µì‹  í–‰íƒœë¥¼ í‘œí˜„í•  ìˆ˜ ìžˆë‹¤.

![ì‚¬ì§„](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/01735ab8-cec7-4208-a3eb-78e69fd87ed5/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º_2021-08-31_á„‹á…©á„Œá…¥á†«_8.47.26.png)

### PATCH vs PUT

`PUT`ì€ í•´ë‹¹ ìžì›ì˜ ì „ì²´ë¥¼ êµì²´í•œë‹¤ëŠ” ì˜ë¯¸ 

`PATCH`ëŠ” ì¼ë¶€ë¥¼ ë³€ê²½í•œë‹¤ëŠ” ì˜ë¯¸

â†’ `update` ì´ë²¤íŠ¸ì—ì„œ PUTë³´ë‹¤ ì˜ë¯¸ì ìœ¼ë¡œ ë” ì í•©í•˜ë‹¤ëŠ” í‰ê°€

### ë§ˆì§€ë§‰ì— `/` ë¥¼ í¬í•¨í•˜ì§€ ì•ŠëŠ”ë‹¤.

ðŸ‘Ž

```bash
GET /users/1/
```

ðŸ‘

```bash
GET /users/1
```

### _(underbar) ëŒ€ì‹  -(dash) ë¥¼ ì‚¬ìš©í•œë‹¤.

ðŸ‘Ž

```bash
POST /users/post_comments
```

ðŸ‘

```bash
POST /users/post-comments
```

### ì†Œë¬¸ìžë¥¼ ì‚¬ìš©í•œë‹¤

ðŸ‘Ž

```bash
POST /users/postComments
```

ðŸ‘

```bash
POST /users/post-comments
```

### ì»¨íŠ¸ë¡¤ ìžì›ì„ ì˜ë¯¸í•˜ëŠ” URI ì˜ˆì™¸ì ìœ¼ë¡œ ë™ì‚¬ë¥¼ í—ˆìš©í•œë‹¤.

í•¨ìˆ˜ì²˜ëŸ¼, ì»¨íŠ¸ë¡¤ ìžì›ì„ ë‚˜íƒ€ë‚´ëŠ” URLì€ ë™ìž‘ì„ í¬í•¨í•˜ì—¬ ëª…ëª…í•œë‹¤.

ðŸ‘Ž

```bash
POST /posts/duplicating
```

ðŸ‘

```bash
POST /posts/duplicate
```

## HTTP Status

### ì„±ê³µ ì‘ë‹µì€ `2XX` ë¡œ ì‘ë‹µí•œë‹¤

- 200 : OK
- 201 : CREATED
    - 200ê³¼ ë‹¬ë¦¬ ìš”ì²­ì— ì„±ê³µí•˜ê³ , ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ë¥¼ ë§Œë“  ê²½ìš°ì— ì‘ë‹µ
        - POST, PUT
- 202 : ACCEPTED
    - í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì„ ë°›ì€ í›„, ìš”ì²­ì€ ìœ íš¨í•˜ì§€ë§Œ ì„œë²„ê°€ ì•„ì§ ì²˜ë¦¬í•˜ì§€ ì•Šì€ ê²½ìš°
        - ë¹„ë™ê¸° ìž‘ì—…
        - ìš”ì²­ì— ëŒ€í•œ ì‘ë‹µì´ ì¼ì • ì‹œê°„ í›„ ì™„ë£Œë˜ëŠ” ìž‘ì—…ì¸ ê²½ìš°
        - ìž‘ì—… ì™„ë£Œ í›„ í´ë¼ì´ì–¸íŠ¸ì— ì•Œë¦´ ìˆ˜ ìžˆëŠ” server push ìž‘ì—…ì„ í•˜ê±°ë‚˜, í´ë¼ì´ì–¸íŠ¸ê°€ í•´ë‹¹ ìž‘ì—…ì˜ ì§„í–‰ ìƒí™©ì„ ì¡°íšŒí•  ìˆ˜ ìžˆëŠ” URI ì‘ë‹µí•´ì•¼í•¨

        ```json
        HTTP/1.1 202 Accepted
        {
        			"links": [
        				{
        					"rel": "self",
        					"method": "GET",
        					"href": "https://api.test.com/v1/users/3"
        				}
        		]
        }

        ```

- 204 : NO Content
    - ì‘ë‹µ bodyê°€ í•„ìš”ì—†ëŠ” ìžì› ì‚­ì œ ìš”ì²­(DELETE) ê°™ì€ ê²½ìš°
    - 200 ì‘ë‹µ í›„ null, {}, [], falseë¥¼ return í•˜ëŠ” ê²ƒê³¼ ë‹¤ë¥´ë‹¤. ì•„ì˜ˆ HTTP Bodyê°€ ì—†ìŒ

### ì‹¤íŒ¨ ì‘ë‹µì€ `4XX`ë¡œ ì‘ë‹µí•œë‹¤

- 400 : [Bad Request]
    - í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ë¯¸ë¦¬ ì •ì˜ëœ íŒŒë¼ë¯¸í„° ìš”êµ¬ì‚¬í•­ì„ ìœ„ë°˜í•œ ê²½ìš°
    - íŒŒë¼ë¯¸í„°ì˜ ìœ„ì¹˜(`path`,Â `query`,Â `body`), ì‚¬ìš©ìž ìž…ë ¥ ê°’, ì—ëŸ¬ ì´ìœ  ë“±ì„Â **ë°˜ë“œì‹œ**Â ì•Œë¦°ë‹¤
        - case 1

        ```json
        {

            "message" : "'name'(body) must be Number, input 'name': test123"
        }

        ```

        - case 2

        ```json
        {

            "errors": [

                {

                    "location": "body",

                    "param": "name",

                    "value": "test123",

                    "msg": "must be Number"
                }

            ]

        }

        ```

- 401 : [Unauthorized]
- 403 : [Forbidden]
    - í•´ë‹¹ ìš”ì²­ì€ ìœ íš¨í•˜ë‚˜ ì„œë²„ ìž‘ì—… ì¤‘ ì ‘ê·¼ì´ í—ˆìš©ë˜ì§€ ì•Šì€ ìžì›ì„ ì¡°íšŒí•˜ë ¤ëŠ” ê²½ìš°
    - ì ‘ê·¼ ê¶Œí•œì´ ì „ì²´ê°€ ì•„ë‹Œ ì¼ë¶€ë§Œ í—ˆìš©ë˜ì–´ ìš”ì²­ìžì˜ ì ‘ê·¼ì´ ë¶ˆê°€í•œ ìžì›ì— ì ‘ê·¼ ì‹œë„í•œ ê²½ìš° ì‘ë‹µí•œë‹¤.
- 404 : [Not Found]
- 405 : [Method Not Allowed]
    - 405 codeëŠ” 404 codeì™€ í˜¼ë™ë  ìˆ˜ ìžˆê¸° ë•Œë¬¸ì— ë£°ì„ ìž˜ ì •í•˜ê³  ì‹œìž‘í•œë‹¤.
    - `POST /users/1`ì˜ ê²½ìš° 404ë¡œ ì‘ë‹µí•œë‹¤ê³  ìƒê°í•  ìˆ˜ ìžˆì§€ë§Œ, ê²½ìš°ì— ë”°ë¼Â **405**ë¡œ ì‘ë‹µí•  ìˆ˜ ìžˆë‹¤.Â `/users/:id`Â URLì€ GET, PATCH, DELETE methodëŠ” í—ˆìš©ë˜ê³  POSTëŠ” ë¶ˆê°€í•œ URLì´ë‹¤.
        - ë§Œì•½ idê°€Â `1`ì¸ ì‚¬ìš©ìžê°€ ì—†ëŠ” ê²½ìš°ì—” 404ë¡œ ì‘ë‹µí•˜ì§€ë§Œ(GET, PATCH, DELETEì˜ ê²½ìš°),Â `POST /users/1`ëŠ”Â `/users/:id`Â URLì´ POST methodë¥¼ ì œê³µí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— 405ë¡œ ì‘ë‹µí•˜ëŠ” ê²Œ ì˜³ë‹¤.
    - `Allow: GET, PATCH, DELETE`Â HTTP headerì— í—ˆìš© ê°€ëŠ¥í•œ methodë¥¼ í‘œì‹œí•œë‹¤.
- 409 : [Conflict]
    - í•´ë‹¹ ìš”ì²­ì˜ ì²˜ë¦¬ê°€ ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ìƒ ë¶ˆê°€ëŠ¥í•˜ê±°ë‚˜ ëª¨ìˆœì´ ìƒê¸´ ê²½ìš°
    - e.g.)Â `DELETE /users/hak`ì˜ ê²½ìš°, ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§ìƒ ì‚¬ìš©ìžì˜ ëª¨ë“  ìžì›ì´ ë¹„ì–´ìžˆì„ ë•Œë§Œ ì‚¬ìš©ìžë¥¼ ì‚­ì œí•  ìˆ˜ ìžˆëŠ” ê·œì¹™ì´ ìžˆì„ ë•Œ 409ë¡œ ì‘ë‹µí•œë‹¤.

        ```json
        409 Conflict

        {

            "message" : "first, delete connected resources."
            "links": [

                {

                    "rel": "posts.delete",

                    "method": "DELETE",

                    "href":  "https://api.test.com/v1/users/hak/posts"
                },

                {

                    "rel": "comments.delete",

                    "method": "DELETE",

                    "href":  "https://api.test.com/v1/users/hak/comments"
                }

            ]

        }

        ```

- 429 : [Too Many Requests]
    - `Retry-After: 3600`(HTTP Headers)
    - DoS, Brute-force attack ê°™ì€ ë¹„ì •ìƒì ì¸ ì ‘ê·¼ì„ ë§‰ê¸° ìœ„í•´ ìš”ì²­ì˜ ìˆ˜ë¥¼ ì œí•œí•œë‹¤.

## ìž…ë ¥ Form í˜•íƒœ

ìƒˆë¡œìš´ Item ìž‘ì„±í•˜ê±°ë‚˜ ê¸°ì¡´ì˜ Itemì„ ìˆ˜ì •í•˜ëŠ” ê²½ìš°, ìž‘ì„±/ìˆ˜ì • Formì€ ì–´ë–»ê²Œ ì œê³µí•´ì•¼ í• ê¹Œ?

**â†’ Form ìžì²´ë¡œë„ ì •ë³´ë¡œ ì·¨ê¸‰**

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-08-31 á„‹á…©á„Œá…¥á†« 8.50.28.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/32c01163-68ad-4d7c-a9dc-64620143fe22/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º_2021-08-31_á„‹á…©á„Œá…¥á†«_8.50.28.png)

## ëª¨ë°”ì¼ í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥¸ ì •ë³´ë¥¼ ë³´ì—¬ì•¼ í•˜ëŠ” ê²½ìš°

REST APIëŠ” URIê°€ **í”Œëž«í¼ ì¤‘ë¦½ì **ì´ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, Request Headerì˜ `User-Agent` ê°’ì„ ì°¸ì¡°í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

ì•„ì´í°ì—ì„œì˜ User-Agent>

```java
Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, like Gecko) Version/3.0 Mobile/1A543a Safari/419.3
```

ì¶œì²˜ 

[https://sanghaklee.tistory.com/57](https://sanghaklee.tistory.com/57)

[https://spoqa.github.io/2012/02/27/rest-introduction.html](https://spoqa.github.io/2012/02/27/rest-introduction.html)